(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,a,t){e.exports=t.p+"static/media/HerokuImage.13ed3891.png"},79:function(e,a,t){e.exports=t(96)},84:function(e,a,t){},85:function(e,a,t){},95:function(e,a,t){},96:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),l=t.n(o),c=(t(84),t(35)),s=(t(85),t(86),t(18)),i=t(10),m=t(36),u=t.n(m),p=t(45),d=t(33),g=t(37),f=t(137),h=t(136),E=t(141),b=t(135),v=t(140),y=t(132),N=t(34),x=t.n(N);function w(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(s.b,{to:"/"},"Deloitte Heroku App Team")," ",(new Date).getFullYear(),".")}var O=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),j=function(e){var a=e.setAuth,t=Object(n.useState)({email:"",password:""}),o=Object(c.a)(t,2),l=o[0],i=o[1],m=l.email,b=l.password,y=function(e){i(Object(g.a)(Object(g.a)({},l),{},Object(d.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{n={email:m,password:b},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},fetch("/api/login",r).then((function(e){return e.json()})).then((function(e){var t=e.success;if(console.log(t),1==t){var n=e.data.token;localStorage.setItem("token",n),localStorage.setItem("message",e.status),localStorage.setItem("state","Login Succesful"),a(!0)}else a(!1),localStorage.setItem("token",""),localStorage.setItem("message",e.message),localStorage.setItem("state",""),console.log(e.message)}))}catch(o){console.error(o.message)}case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=O();return r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{component:"main",maxWidth:"xs",className:"signin"},r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement("div",{className:j.paper},r.a.createElement("img",{src:x.a,height:"120"}))),r.a.createElement("div",{className:j.paper},r.a.createElement("h1",null,"Sign In"),r.a.createElement("form",{onSubmit:N},r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:m,errorMessage:"Email is required",onChange:function(e){return y(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"form-control my-3",value:b,onChange:function(e){return y(e)}}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit},"Sign In"),r.a.createElement(f.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{item:!0},r.a.createElement(s.b,{to:"/register",className:"help-auth-text"},"Visiting for the first time? Sign up"))))),r.a.createElement(v.a,{mt:8},r.a.createElement(w,null))))};function S(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(s.b,{to:"/"},"Deloitte Heroku App Team")," ",(new Date).getFullYear(),".")}var I=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),A=function(e){var a=e.setAuth,t=Object(n.useState)({email:"",password:"",firstName:"",lastName:""}),o=Object(c.a)(t,2),l=o[0],i=o[1],m=l.email,b=l.password,y=l.firstName,N=l.lastName,w=function(e){i(Object(g.a)(Object(g.a)({},l),{},Object(d.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:m,password:b,firstName:y,lastName:N},e.next=5,fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,console.log(o),localStorage.setItem("token",o.token),a(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(a){return e.apply(this,arguments)}}(),j=I();return r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement("div",{className:j.paper},r.a.createElement("img",{src:x.a,height:"120"}))),r.a.createElement("div",{className:j.paper},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:O},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",className:"form-control my-3",value:y,onChange:function(e){return w(e)}}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",className:"form-control my-3",value:N,onChange:function(e){return w(e)}}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Username",className:"form-control my-3",value:m,onChange:function(e){return w(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"form-control my-3",value:b,onChange:function(e){return w(e)}}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:j.submit},"Sign Up"),r.a.createElement(f.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{item:!0},r.a.createElement(s.b,{to:"/",className:"help-auth-text"},"Already have an account? Sign in"))))),r.a.createElement(v.a,{mt:5},r.a.createElement(S,null))))},k=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Dashboard"))},D=t(139),T=t(70),C=t(142),F=t(138),L=Object(b.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#000"}}}));function U(e){var a=e.show,t=L();return r.a.createElement("div",null,r.a.createElement(C.a,{className:t.backdrop,open:a},r.a.createElement(F.a,{color:"inherit"})))}var W=t(71),G=t(69),P=t.n(G),J=function(e,a){return function(t){t({type:"LOADING",response:!0});var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("/api/login",n).then((function(e){return e.json()})).then((function(e){if(e.success){if(e.data.token){t({type:"LOADING",response:!1}),localStorage.setItem("usertoken",e.data.token);var n=P()(e.data.token);console.log(n),a.push("/dashboard")}}else{var r=e.message;t({type:"LOADING",response:!1}),t({type:"LOGIN_FAILURE",response:r}),a.push("/")}})).catch((function(e){t({type:"LOADING",response:!1}),t({type:"LOGIN_FAILURE",response:e})}))}};t(95);function R(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(s.b,{to:"/"},"Deloitte App")," ",(new Date).getFullYear(),".")}var z=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));Object(W.a)((function(e){return{loading:e.loading,error:e.login.loginerror}}))((function(e){var a=e.dispatch,t=e.loading,o=e.error,l=z(),c=Object(i.g)();Object(n.useEffect)((function(){t||(localStorage.removeItem("usertoken"),localStorage.removeItem("state"),a({type:"LOGOUT_USER",response:null}))}),[t]);var m=Object(T.a)({initialValues:{email:"",password:""},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid email address"):a.email="Required",e.password||(a.password="Required"),a},onSubmit:function(e){!function(e){a(J(e,c)),console.log(e)}(e)}});return r.a.createElement(h.a,{component:"main",maxWidth:"xs",className:"signin"},r.a.createElement(U,{show:t}),r.a.createElement("div",{className:l.paper},r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement("div",{className:l.deloitteAvatar},r.a.createElement("img",{src:x.a,height:"120"}))),r.a.createElement("form",{className:l.form,onSubmit:m.handleSubmit},r.a.createElement(D.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoFocus:!0,size:"small",onChange:m.handleChange,value:m.values.email,className:"text-small-2",error:Boolean(m.touched.email&&m.errors.email),helperText:m.touched.email&&m.errors.email&&m.errors.email}),r.a.createElement(D.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",size:"small",onChange:m.handleChange,value:m.values.password,error:Boolean(m.touched.password&&m.errors.password),helperText:m.touched.password&&m.errors.password&&m.errors.password}),o&&!Array.isArray(o)&&"string"===typeof o&&r.a.createElement(y.a,{component:"h3",variant:"body1",style:{textAlign:"center"}},r.a.createElement("span",{className:"text-small-2",style:{color:"#da291c"}},o)),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit},"Sign In"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(s.b,{to:"/forgot",className:"help-auth-text"},"Forgot password?")),r.a.createElement(f.a,{item:!0},r.a.createElement(s.b,{to:"/register",className:"help-auth-text"},"Don't have an account?  Sign Up"))))),r.a.createElement(v.a,{mt:8},r.a.createElement(R,null)))}));var _=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],o=a[1],l=function(e){o(e)};return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(e){return t?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(j,Object.assign({},e,{setAuth:l}))}}),r.a.createElement(i.b,{exact:!0,path:"/login",render:function(e){return t?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(j,Object.assign({},e,{setAuth:l}))}}),r.a.createElement(i.b,{exact:!0,path:"/register",render:function(e){return t?r.a.createElement(i.a,{to:"/register"}):r.a.createElement(A,Object.assign({},e,{setAuth:l}))}}),r.a.createElement(i.b,{exact:!0,path:"/dashboard",render:function(e){return t?r.a.createElement(k,Object.assign({},e,{setAuth:l})):r.a.createElement(i.a,{to:"/login"})}})))))};l.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.3f17c907.chunk.js.map